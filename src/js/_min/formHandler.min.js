function populateDynamicInputs(){var e,t,n=signalVars;for(e in n.Landing_Page=window.location.href,n)n.hasOwnProperty(e)&&((t=document.createElement("input")).type="hidden",t.name=e,t.value=n[e],document.getElementById("dynamicInputs").appendChild(t));createSerializedInput(n)}function createSerializedInput(e){var e=JSON.stringify(e),t=document.createElement("input");t.type="hidden",t.name="serializedLeadVars",t.value=e,document.getElementById("serializedLeadVars").appendChild(t)}window.onload=function(){if(document.getElementById("lead_form")){const r=e=>document.getElementById(e);var e=e=>{e=r(e);return e||null};const s=e("first_name"),c=e("last_name"),m=e("email"),l=e("primary_phone"),u=e("injury_cause");e("city");const f=e("state"),_=r("submit_button");_.disabled=!0,l.addEventListener("input",function(e){var t=e.target.value.replace(/\D/g,""),n=t.replace(/(\d{3})(\d{3})(\d{4})/,"($1) $2-$3");e.target.value=n,document.getElementById("primary-phone-unformatted").value=t});e=(e,t,n)=>{null!==e&&e.addEventListener(t,n)};function t(){var e=u.value.trim(),t=document.getElementById("injury-cause-error"),n=u.closest(".form-item");if(""==e||!e)return t.textContent="Se requiere la causa de la lesión.",_.disabled=!0,n.classList.add("form-error"),!1;t.textContent="",o(),n.classList.remove("form-error")}function n(){var e=f.value.trim(),t=document.getElementById("state-error"),n=f.closest(".form-item");if(""==e||!e)return t.textContent="Se requiere el estado donde ocurrió el incidente.",_.disabled=!0,n.classList.add("form-error"),!1;t.textContent="",o(),n.classList.remove("form-error")}function o(){var e=e=>e?e.value.trim():"",t=e(s),n=e(c),o=e(m),r=e(l),a=e(u),e=e(f);""!==t&&""!==n&&""!==o&&(t=o)&&i(t)&&""!==r&&(n=r)&&d(n)&&(!u||u&&""!==a||!f||f&&""!==e)&&(_.disabled=!1)}function i(e){return/^[\w-\.]+@([\w-]+\.)+[\w-]{2,}$/.test(e)}function d(e){return/^\(?(\d{3})\)?[- ]?(\d{3})[- ]?(\d{4})$/.test(e)}e(s,"blur",function(){var e=s.value.trim(),t=document.getElementById("fname-error"),n=s.closest(".form-item");""===e?(t.textContent="Se requiere el primer nombre.",_.disabled=!0,n.classList.add("form-error")):/\d/.test(e)?(t.textContent="El nombre no puede contener números.",_.disabled=!0,n.classList.add("form-error")):(t.textContent="",o(),n.classList.remove("form-error"))}),e(c,"blur",function(){var e=c.value.trim(),t=document.getElementById("lname-error"),n=c.closest(".form-item");""===e?(t.textContent="Se requiere apellido.",_.disabled=!0,n.classList.add("form-error")):/\d/.test(e)?(t.textContent="El nombre no puede contener números.",_.disabled=!0,n.classList.add("form-error")):(t.textContent="",o(),n.classList.remove("form-error"))}),e(m,"blur",function(){var e=m.value.trim(),t=document.getElementById("email-error"),n=m.closest(".form-item");""===e?(t.textContent="Correo electronico es requerido.",_.disabled=!0,n.classList.add("form-error")):i(e)?(t.textContent="",o(),n.classList.remove("form-error")):(t.textContent="Introduzca un correo electrónico válido.",_.disabled=!0,n.classList.add("form-error"))}),e(l,"blur",function(){var e=l.value.trim(),t=document.getElementById("primary-phone-error"),n=l.closest(".form-item");""===e?(t.textContent="Se requiere teléfono principal.",_.disabled=!0,n.classList.add("form-error")):d(e)?(t.textContent="",o(),n.classList.remove("form-error")):(t.textContent="Enter a valid phone number.",_.disabled=!0,n.classList.add("form-error"))}),u&&(e(u,"blur",t),e(u,"change",t)),f&&(e(f,"blur",n),e(f,"change",n))}},document.addEventListener("DOMContentLoaded",function(){document.getElementById("dynamicInputs")&&setTimeout(function(){populateDynamicInputs()},2e3)}),document.addEventListener("DOMContentLoaded",()=>{const _=document.querySelector("#lead_form");const p=new URLSearchParams(window.location.search).get("dev_mode");"logs"==p&&console.log("devMode is in logs mode - form submission will log output instead"),"no-cors"==p&&console.log("devMode is in no-cors mode - form submission will submit without CORS mode - expect redirect to fail"),_.addEventListener("submit",async n=>{n.preventDefault();var n=window.location.origin+"/submit-form",e=new FormData(_),e=Object.fromEntries(e.entries()),t=e.injury_cause||e.Type_Of_Legal_Problem||e.Type_Of_Accident||null,o=e.comments||e.case_details||null,r=e.primary_phone.replace(/\D/g,"");let a=235;var i=t,d=e.state||null,s=(["auto_accident","bicycle_accident","motorcycle_accident","pedestrian_accident","rideshare_accident","truck_accident"].includes(i)&&d?(s=["FL","TX"],c=["AZ","CO","CT","DC","GA","IA","IL","IN","LA","MD","NY","NJ","PA","SC","TN","UT","VA","WA"],m=["AK","AL","AR","DE","HI","ID","KS","KY","MA","ME","MN","MO","MS","MT","ND","NE","NH","NM","OH","OK","OR","RI","SD","VT","WI","WV","WY"],["CA","NV"].includes(d)?a=750:s.includes(d)?a=575:c.includes(d)?a=390:m.includes(d)&&(a=235)):["slip_and_fall","dog_bite"].includes(i)?a="CA"===d?250:40:"workers_comp"===i&&(a="CA"===d?200:16),{ad_placement:e.ad_placement,adset_id:e.adset_id,aid:e.aid,aid_name:e.aid_name,Best_Time_to_Call:e.Best_Time_to_Call,brandId:e.brand_id,campaign_id:e.campaign_id,cid:e.cid,cid_name:e.cid_name,city:e.city,comments:o,company:e.company,email:e.email,fbad_id:e.fbad_id,first_name:e.first_name,gclid:e.gclid,geo:e.geo,last_name:e.last_name,Landing_Page:e.Landing_Page,mediaSourceName:e.mediaSourceNameWebhook,mediaSourceNameWebhook:e.mediaSourceNameWebhook,msclkid:e.msclkid,primary_phone:r,state:e.state,ttclid:e.ttclid,type_of_legal_problem:t,utm_campaign:e.utm_campaign,utm_content:e.utm_content,utm_medium:e.utm_medium,utm_source:e.utm_source,wbraid:e.wbraid,xtm_adgroup:e.xtm_adgroup,xtm_network:e.xtm_network,xtm_offer:e.xtm_offer,xtm_placement:e.xtm_placement,zip:e.user_zip}),c=e.serializedLeadVars?JSON.parse(e.serializedLeadVars):null,m=c?new URLSearchParams(c).toString():"";if("logs"==p)console.log("Form submitted"),console.log(s);else try{p;var l=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(s)}),u=await l.json(),f=l.status;let e,t="";200==f?"WebhookGenericPost_v2 successfully!"===u.message?(e="matched",t="Success",window.location.href=`${window.location.origin}/confirmation/?status=${e}&injury_cause=${i}&state=${s.state}&lead=${a}&mediaSourceName=${s.mediaSourceName}&`+m):(e="unmatched",t=Array.isArray(u)?u.join(", "):u,window.location.href=`${window.location.origin}/confirmation/?status=${e}&message=`+u.message):(e="Error",t=f+" - Failed to POST",window.location.href=`${window.location.origin}/confirmation/?status=${e}&response=`+t)}catch(e){console.log(e),window.location.href=window.location.origin+"/confirmation/?status=Error&response=Network Error"}})});