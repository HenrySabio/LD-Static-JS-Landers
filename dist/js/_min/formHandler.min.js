function populateDynamicInputs(){var e,t,n=signalVars;for(e in n.Landing_Page=window.location.href,n)n.hasOwnProperty(e)&&((t=document.createElement("input")).type="hidden",t.name=e,t.value=n[e],document.getElementById("dynamicInputs").appendChild(t));createSerializedInput(n)}function createSerializedInput(e){var e=JSON.stringify(e),t=document.createElement("input");t.type="hidden",t.name="serializedLeadVars",t.value=e,document.getElementById("serializedLeadVars").appendChild(t)}window.onload=function(){if(document.getElementById("lead_form")){const r=e=>document.getElementById(e);var e=e=>{e=r(e);return e||null};const s=e("first_name"),c=e("last_name"),l=e("email"),m=e("primary_phone"),u=e("injury_cause");e("city");const f=e("state"),_=r("submit_button");_.disabled=!0,m.addEventListener("input",function(e){var t=e.target.value.replace(/\D/g,""),n=t.replace(/(\d{3})(\d{3})(\d{4})/,"($1) $2-$3");e.target.value=n,document.getElementById("primary-phone-unformatted").value=t});e=(e,t,n)=>{null!==e&&e.addEventListener(t,n)};function t(){var e=u.value.trim(),t=document.getElementById("injury-cause-error"),n=u.closest(".form-item");if(""==e||!e)return t.textContent="Se requiere la causa de la lesión.",_.disabled=!0,n.classList.add("form-error"),!1;t.textContent="",o(),n.classList.remove("form-error")}function n(){var e=f.value.trim(),t=document.getElementById("state-error"),n=f.closest(".form-item");if(""==e||!e)return t.textContent="Se requiere el estado donde ocurrió el incidente.",_.disabled=!0,n.classList.add("form-error"),!1;t.textContent="",o(),n.classList.remove("form-error")}function o(){var e=e=>e?e.value.trim():"",t=e(s),n=e(c),o=e(l),r=e(m),a=e(u),e=e(f);""!==t&&""!==n&&""!==o&&(t=o)&&i(t)&&""!==r&&(n=r)&&d(n)&&(!u||u&&""!==a||!f||f&&""!==e)&&(_.disabled=!1)}function i(e){return/^[\w-\.]+@([\w-]+\.)+[\w-]{2,}$/.test(e)}function d(e){return/^\(?(\d{3})\)?[- ]?(\d{3})[- ]?(\d{4})$/.test(e)}e(s,"blur",function(){var e=s.value.trim(),t=document.getElementById("fname-error"),n=s.closest(".form-item");""===e?(t.textContent="Se requiere el primer nombre.",_.disabled=!0,n.classList.add("form-error")):/\d/.test(e)?(t.textContent="El nombre no puede contener números.",_.disabled=!0,n.classList.add("form-error")):(t.textContent="",o(),n.classList.remove("form-error"))}),e(c,"blur",function(){var e=c.value.trim(),t=document.getElementById("lname-error"),n=c.closest(".form-item");""===e?(t.textContent="Se requiere apellido.",_.disabled=!0,n.classList.add("form-error")):/\d/.test(e)?(t.textContent="El nombre no puede contener números.",_.disabled=!0,n.classList.add("form-error")):(t.textContent="",o(),n.classList.remove("form-error"))}),e(l,"blur",function(){var e=l.value.trim(),t=document.getElementById("email-error"),n=l.closest(".form-item");""===e?(t.textContent="Correo electronico es requerido.",_.disabled=!0,n.classList.add("form-error")):i(e)?(t.textContent="",o(),n.classList.remove("form-error")):(t.textContent="Introduzca un correo electrónico válido.",_.disabled=!0,n.classList.add("form-error"))}),e(m,"blur",function(){var e=m.value.trim(),t=document.getElementById("primary-phone-error"),n=m.closest(".form-item");""===e?(t.textContent="Se requiere teléfono principal.",_.disabled=!0,n.classList.add("form-error")):d(e)?(t.textContent="",o(),n.classList.remove("form-error")):(t.textContent="Enter a valid phone number.",_.disabled=!0,n.classList.add("form-error"))}),u&&(e(u,"blur",t),e(u,"change",t)),f&&(e(f,"blur",n),e(f,"change",n))}},document.addEventListener("DOMContentLoaded",function(){document.getElementById("dynamicInputs")&&setTimeout(function(){populateDynamicInputs()},2e3)}),document.addEventListener("DOMContentLoaded",()=>{const f=document.querySelector("#lead_form");const _=new URLSearchParams(window.location.search).get("dev_mode");"logs"==_&&console.log("devMode is in logs mode - form submission will log output instead"),"no-cors"==_&&console.log("devMode is in no-cors mode - form submission will submit without CORS mode - expect redirect to fail"),f.addEventListener("submit",async e=>{e.preventDefault();var e=new FormData(f),e=Object.fromEntries(e.entries()),t=e.injury_cause||e.Type_Of_Legal_Problem||e.Type_Of_Accident||null,n=e.comments||e.case_details||null,o=e.primary_phone.replace(/\D/g,"");let r=235;var a=t,i=e.state||null,d=(["auto_accident","bicycle_accident","motorcycle_accident","pedestrian_accident","rideshare_accident","truck_accident"].includes(a)&&i?(d=["FL","TX"],s=["AZ","CO","CT","DC","GA","IA","IL","IN","LA","MD","NY","NJ","PA","SC","TN","UT","VA","WA"],c=["AK","AL","AR","DE","HI","ID","KS","KY","MA","ME","MN","MO","MS","MT","ND","NE","NH","NM","OH","OK","OR","RI","SD","VT","WI","WV","WY"],["CA","NV"].includes(i)?r=750:d.includes(i)?r=575:s.includes(i)?r=390:c.includes(i)&&(r=235)):["slip_and_fall","dog_bite"].includes(a)?r="CA"===i?250:40:"workers_comp"===a&&(r="CA"===i?200:16),{ad_placement:e.ad_placement,adset_id:e.adset_id,aid:e.aid,aid_name:e.aid_name,Best_Time_to_Call:e.Best_Time_to_Call,brandId:e.brand_id,campaign_id:e.campaign_id,cid:e.cid,cid_name:e.cid_name,city:e.city,comments:n,company:e.company,email:e.email,fbad_id:e.fbad_id,first_name:e.first_name,gclid:e.gclid,geo:e.geo,last_name:e.last_name,Landing_Page:e.Landing_Page,mediaSourceName:e.mediaSourceNameWebhook,mediaSourceNameWebhook:e.mediaSourceNameWebhook,msclkid:e.msclkid,primary_phone:o,state:e.state,ttclid:e.ttclid,type_of_legal_problem:t,utm_campaign:e.utm_campaign,utm_content:e.utm_content,utm_medium:e.utm_medium,utm_source:e.utm_source,wbraid:e.wbraid,xtm_adgroup:e.xtm_adgroup,xtm_network:e.xtm_network,xtm_offer:e.xtm_offer,xtm_placement:e.xtm_placement,zip:e.user_zip}),s=e.serializedLeadVars?JSON.parse(e.serializedLeadVars):null,c=s?new URLSearchParams(s).toString():"";if("logs"==_)console.log("Form submitted"),console.log(d);else try{_;var l=await fetch("/.netlify/functions/submit-form",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(d)}),m=await l.json();if(m)console.log(m),console.log(l);else{var u=l.status;let e,t="";200==u?"WebhookGenericPost_v2 successfully!"===m.message?(e="matched",t="Success",window.location.href=`${window.location.origin}/confirmation/?status=${e}&injury_cause=${a}&state=${d.state}&lead=${r}&mediaSourceName=${d.mediaSourceName}&`+c):(e="unmatched",t=Array.isArray(m)?m.join(", "):m,window.location.href=`${window.location.origin}/confirmation/?status=${e}&message=`+m.message):(e="Error",t=u+" - Failed to POST",window.location.href=`${window.location.origin}/confirmation/?status=${e}&response=`+t)}}catch(e){console.log(e),window.location.href=window.location.origin+"/confirmation/?status=Error&response=Network Error"}})});