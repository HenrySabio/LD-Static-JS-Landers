function populateDynamicInputs(){var e,t,n=signalVars;for(e in n.Landing_Page=window.location.href,n)n.hasOwnProperty(e)&&((t=document.createElement("input")).type="hidden",t.name=e,t.value=n[e],document.getElementById("dynamicInputs").appendChild(t));createSerializedInput(n)}function createSerializedInput(e){var e=JSON.stringify(e),t=document.createElement("input");t.type="hidden",t.name="serializedLeadVars",t.value=e,document.getElementById("serializedLeadVars").appendChild(t)}window.onload=function(){if(document.getElementById("lead_form")){const a=e=>document.getElementById(e);var e=e=>{e=a(e);return e||null};const d=e("first_name"),l=e("last_name"),c=e("email"),m=e("primary_phone"),u=e("injury_cause");e("city");const p=e("state"),f=a("submit_button");f.disabled=!0,m.addEventListener("input",function(e){var t=e.target.value.replace(/\D/g,""),n=t.replace(/(\d{3})(\d{3})(\d{4})/,"($1) $2-$3");e.target.value=n,document.getElementById("primary-phone-unformatted").value=t});e=(e,t,n)=>{null!==e&&e.addEventListener(t,n)};function t(){var e=u.value.trim(),t=document.getElementById("injury-cause-error"),n=u.closest(".form-item");if(""==e||!e)return t.textContent="Se requiere la causa de la lesión.",f.disabled=!0,n.classList.add("form-error"),!1;t.textContent="",o(),n.classList.remove("form-error")}function n(){var e=p.value.trim(),t=document.getElementById("state-error"),n=p.closest(".form-item");if(""==e||!e)return t.textContent="Se requiere el estado donde ocurrió el incidente.",f.disabled=!0,n.classList.add("form-error"),!1;t.textContent="",o(),n.classList.remove("form-error")}function o(){var e=e=>e?e.value.trim():"",t=e(d),n=e(l),o=e(c),a=e(m),r=e(u),e=e(p);""!==t&&""!==n&&""!==o&&(t=o)&&i(t)&&""!==a&&(n=a)&&s(n)&&(!u||u&&""!==r||!p||p&&""!==e)&&(f.disabled=!1)}function i(e){return/^[\w-\.]+@([\w-]+\.)+[\w-]{2,}$/.test(e)}function s(e){return/^\(?(\d{3})\)?[- ]?(\d{3})[- ]?(\d{4})$/.test(e)}e(d,"blur",function(){var e=d.value.trim(),t=document.getElementById("fname-error"),n=d.closest(".form-item");""===e?(t.textContent="Se requiere el primer nombre.",f.disabled=!0,n.classList.add("form-error")):/\d/.test(e)?(t.textContent="El nombre no puede contener números.",f.disabled=!0,n.classList.add("form-error")):(t.textContent="",o(),n.classList.remove("form-error"))}),e(l,"blur",function(){var e=l.value.trim(),t=document.getElementById("lname-error"),n=l.closest(".form-item");""===e?(t.textContent="Se requiere apellido.",f.disabled=!0,n.classList.add("form-error")):/\d/.test(e)?(t.textContent="El nombre no puede contener números.",f.disabled=!0,n.classList.add("form-error")):(t.textContent="",o(),n.classList.remove("form-error"))}),e(c,"blur",function(){var e=c.value.trim(),t=document.getElementById("email-error"),n=c.closest(".form-item");""===e?(t.textContent="Correo electronico es requerido.",f.disabled=!0,n.classList.add("form-error")):i(e)?(t.textContent="",o(),n.classList.remove("form-error")):(t.textContent="Introduzca un correo electrónico válido.",f.disabled=!0,n.classList.add("form-error"))}),e(m,"blur",function(){var e=m.value.trim(),t=document.getElementById("primary-phone-error"),n=m.closest(".form-item");""===e?(t.textContent="Se requiere teléfono principal.",f.disabled=!0,n.classList.add("form-error")):s(e)?(t.textContent="",o(),n.classList.remove("form-error")):(t.textContent="Enter a valid phone number.",f.disabled=!0,n.classList.add("form-error"))}),u&&(e(u,"blur",t),e(u,"change",t)),p&&(e(p,"blur",n),e(p,"change",n))}},document.addEventListener("DOMContentLoaded",function(){document.getElementById("dynamicInputs")&&setTimeout(function(){populateDynamicInputs()},2e3)}),document.addEventListener("DOMContentLoaded",()=>{const p=document.querySelector("#lead_form");const f=new URLSearchParams(window.location.search).get("dev_mode");"logs"==f&&console.log("devMode is in logs mode - form submission will log output instead"),"no-cors"==f&&console.log("devMode is in no-cors mode - form submission will submit without CORS mode - expect redirect to fail"),p.addEventListener("submit",async e=>{e.preventDefault();var e=new FormData(p),e=Object.fromEntries(e.entries()),t=e.injury_cause||e.Type_Of_Legal_Problem||e.Type_Of_Accident||null,n=e.comments||e.case_details||null,o=e.primary_phone.replace(/\D/g,"");let a=235;var r=t,i=e.state||null,s=(["auto_accident","bicycle_accident","motorcycle_accident","pedestrian_accident","rideshare_accident","truck_accident"].includes(r)&&i?(s=["FL","TX"],d=["AZ","CO","CT","DC","GA","IA","IL","IN","LA","MD","NY","NJ","PA","SC","TN","UT","VA","WA"],l=["AK","AL","AR","DE","HI","ID","KS","KY","MA","ME","MN","MO","MS","MT","ND","NE","NH","NM","OH","OK","OR","RI","SD","VT","WI","WV","WY"],["CA","NV"].includes(i)?a=750:s.includes(i)?a=575:d.includes(i)?a=390:l.includes(i)&&(a=235)):["slip_and_fall","dog_bite"].includes(r)?a="CA"===i?250:40:"workers_comp"===r&&(a="CA"===i?200:16),{ad_placement:e.ad_placement,adset_id:e.adset_id,aid:e.aid,aid_name:e.aid_name,Best_Time_to_Call:e.Best_Time_to_Call,brandId:e.brand_id,campaign_id:e.campaign_id,cid:e.cid,cid_name:e.cid_name,city:e.city,comments:n,company:e.company,email:e.email,fbad_id:e.fbad_id,first_name:e.first_name,gclid:e.gclid,geo:e.geo,last_name:e.last_name,Landing_Page:e.Landing_Page,mediaSourceName:e.mediaSourceNameWebhook,mediaSourceNameWebhook:e.mediaSourceNameWebhook,msclkid:e.msclkid,primary_phone:o,state:e.state,ttclid:e.ttclid,type_of_legal_problem:t,utm_campaign:e.utm_campaign,utm_content:e.utm_content,utm_medium:e.utm_medium,utm_source:e.utm_source,wbraid:e.wbraid,xtm_adgroup:e.xtm_adgroup,xtm_network:e.xtm_network,xtm_offer:e.xtm_offer,xtm_placement:e.xtm_placement,zip:e.user_zip}),d=e.serializedLeadVars?JSON.parse(e.serializedLeadVars):null,l=d?new URLSearchParams(d).toString():"";if("logs"==f)console.log("Form submitted"),console.log(s);else try{f;var c=await fetch("/.netlify/functions/submit-form",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(s)}),m=await c.json(),u=c.status;let e,t="";200==u?"WebhookGenericPost_v2 successfully!"===m.message?(e="matched",t="Success",window.location.href=`${window.location.origin}/confirmation/?status=${e}&injury_cause=${r}&state=${s.state}&lead=${a}&mediaSourceName=${s.mediaSourceName}&`+l):(e="unmatched",t=Array.isArray(m)?m.join(", "):m,window.location.href=`${window.location.origin}/confirmation/?status=${e}&message=`+m.message):(e="Error",t=u+" - Failed to POST",window.location.href=`${window.location.origin}/confirmation/?status=${e}&response=`+t)}catch(e){console.log(e),window.location.href=window.location.origin+"/confirmation/?status=Error&response=Network Error"}})}),document.addEventListener("DOMContentLoaded",function(){if(document.querySelector(".row-multi-step-form")){let n=document.getElementsByClassName("form-step"),o=document.getElementById("prev-btn"),t=document.getElementById("next-btn"),a=document.getElementById("submit-btn"),r=document.getElementsByTagName("form")[0],e=document.getElementById("preloader-wrapper"),i=document.getElementById("success"),s=(r.onsubmit=()=>!1,0),d=n.length-1;if(n[s].classList.add("d-block"),n[s].classList.remove("d-none"),0==s&&(o.style.display="none",a.style.display="none",t.style.display="inline-block"),0!==document.getElementsByClassName("step-counter").length){let t=document.getElementsByClassName("step-counter")[0];function l(e){t.innerHTML=`Step ${e+1} of `+(1+d)}t.innerHTML=`Step ${s+1} of `+(1+d)}const m=e=>{document.getElementsByClassName("progress-bar")[0].style.width=e+"%"};function c(e){let t=!0;return n[e].querySelectorAll("input, select").forEach(e=>{(function(e){var t=document.getElementById(e.id+"-error");let n=!0,o="";return"first_name"!==e.id&&"last_name"!==e.id||/^[a-zA-Z]+$/.test(e.value)||(n=!1,o="Please enter only letters."),"email"!==e.id||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.value)||(n=!1,o="Please enter a valid email address."),"tel_number"!==e.id||/^\+?[1-9]\d{1,14}$/.test(e.value)||(n=!1,o="Please enter a valid phone number."),e.value.trim()||(n=!1,o="This field is required."),t.textContent=n?"":o,n})(e)&&""!==e.value.trim()||(t=!1)}),t}t.addEventListener("click",()=>{var e;c(s)&&(l(++s),e=s-1,0<s&&s<=d?(o.style.display="inline-block",n[s].classList.remove("d-none"),n[s].classList.add("d-block"),n[e].classList.remove("d-block"),n[e].classList.add("d-none"),s==d&&(a.style.display="inline-block",t.style.display="none")):s>d&&(r.onsubmit=()=>!0),m(100/d*s))}),o.addEventListener("click",()=>{var e;0<s&&(l(--s),e=s+1,o.style.display="inline-block",n[s].classList.remove("d-none"),n[s].classList.add("d-block"),n[e].classList.remove("d-block"),n[e].classList.add("d-none"),s<d)&&(a.style.display="none",t.style.display="inline-block",o.style.display="inline-block"),0==s&&(o.style.display="none"),m(100/d*s)}),a.addEventListener("click",()=>{var t;c(s)&&(e.classList.add("d-block"),t=3e3,new Promise(e=>setTimeout(e,t)).then(()=>{r.classList.add("loaded")}).then(()=>{n[d].classList.remove("d-block"),n[d].classList.add("d-none"),o.style.display="none",a.style.display="none",i.classList.remove("d-none"),i.classList.add("d-block")}))})}});